<h2 class="h6 fw-bolder mt-1">
	<a href="{{ url('csrdelft_agenda_maand') }}"  title="Agenda">Agenda</a>
</h2>

<div class="list-group list-group-flush">
	{% for group in groups %}
	<div class="list-group-item">
		<h3 class="agenda-item-dag fw-bolder text-black-50 text-uppercase">
			{{ date(group.beginMoment) | datetime_format_long }}
		</h3>
		{% for item in group.items %}
		<div class="list-group-item list-group-item-action d-flex flex-row align-items-center p-0 border-0">
			<a href="{{ item.url }}" title="{{ item.beschrijving }}" class="d-block flex-grow-1">
				<p class="text-truncate flex-grow-1">
					<span class="agenda-item-moment d-inline-block">
						{{ date(item.beginMoment) | time_format }}
					</span>
					{{ item.titel }}
				</p>
			</a>

			{% if item is maaltijd %}
				<div id="maaltijdketzer-{{ item.maaltijd_id }}" class="ms-1 media maaltijdketzer-{{ item.maaltijd_id }}" data-maaltijdnaam="{{ item.titel }}">
					{% set aanmelding = get_maaltijd_aanmelding(item.maaltijd_id) %}
					{# <input
						class="form-check-input"
						type="checkbox"
						role="button"
						value="..."
					/> #}

					{% if is_granted('ROLE_MAAL_IK') %}
					{% if not item.gesloten %}
						{% if aanmelding is defined and aanmelding is not none %}
							<a
								onclick="window.ketzerAjax('{{ url('csrdelft_maalcie_mijnmaaltijden_afmelden', {maaltijd_id: item.maaltijd_id}) }}', '.maaltijdketzer-{{ item.maaltijd_id }}');"
								class="aanmeldbtn" tabindex="0" title="Aangemeld">
								<input class="form-check-input" type="checkbox" checked />
							</a>

						{% elseif item.aantalAanmeldingen >= item.aanmeld_limiet %}
							<div class="btn btn-danger disabled">
								{{ icon("ban", null, "Maaltijd is vol") }}
							</div>
						{% else %}
							<a
								onclick="window.ketzerAjax('{{ url('csrdelft_maalcie_mijnmaaltijden_aanmelden', {maaltijd_id: item.maaltijd_id}) }}', '.maaltijdketzer-{{ item.maaltijd_id }}');"
								class="aanmeldbtn" tabindex="0" title="Niet aangemeld">
								<input class="form-check-input" type="checkbox" />
							</a>
						{% endif %}
					{% endif %}

					{% if aanmelding is defined and aanmelding is not none and aanmelding.aantal_gasten > 0 %}
						+{{ aanmelding.aantal_gasten }}
					{% endif %}

					{% if aanmelding is defined and aanmelding is not none and aanmelding.gasten_eetwens %}
						{{ icon("comment", null, aanmelding.gasten_eetwens) }}
					{% endif %}

					{% if item.gesloten and item.eindMoment > date().timestamp %}
						{% set date = item.laatst_gesloten | time_format %}
						{{ icon("lock", null, "Maaltijd is gesloten om " ~ date) }}
					{% endif %}
				{% endif %}
				</div>
			{% endif %}
		</div>
		{% endfor %}
  	</div>
	{% endfor %}
</div>

